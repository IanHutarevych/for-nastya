<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–ª—è –ù–∞—Å—Ç–∫–∏ ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {
            background-color: #fff0f3;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #music-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #ffb3c1;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(255, 75, 110, 0.2);
            transition: all 0.3s ease;
        }

        #music-toggle svg {
            width: 24px;
            height: 24px;
            color: #ff4b6e;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        #music-toggle:hover {
            transform: scale(1.1);
            border-color: #ff4b6e;
            background: white;
        }

        .playing {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 75, 110, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 75, 110, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 75, 110, 0); }
        }

        .card {
            background: white;
            padding: 3rem;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(255, 75, 110, 0.2);
            text-align: center;
            max-width: 500px;
            width: 90%;
            transition: all 0.5s ease-in-out;
            position: relative;
            z-index: 10;
        }

        .shake { animation: shake 0.4s both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            30%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .bg-heart {
            position: fixed;
            top: -20px;
            font-size: 20px;
            user-select: none;
            pointer-events: none;
            z-index: 1;
            animation: fall linear forwards;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        h2 { color: #ff4b6e; margin-bottom: 25px; font-size: 1.6rem; }

        .hint-bulb {
            font-size: 35px;
            cursor: pointer;
            display: inline-block;
            margin-top: 10px;
            transition: transform 0.2s;
            animation: glow 1.5s infinite alternate;
        }
        .hint-bulb:hover { transform: scale(1.2); }

        @keyframes glow {
            from { filter: drop-shadow(0 0 2px #ffd700); }
            to { filter: drop-shadow(0 0 15px #ff9d00); }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 20px;
            width: 80%;
            max-width: 300px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: zoomIn 0.3s ease-out;
        }

        @keyframes zoomIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .options-container { display: grid; grid-template-columns: 1fr; gap: 12px; }

        .option-btn, .action-btn, .nav-btn, .close-btn {
            background-color: white;
            color: #ff4b6e;
            border: 2px solid #ffb3c1;
            padding: 12px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 600;
            transition: 0.3s;
        }

        .option-btn:hover, .action-btn:hover, .nav-btn:hover, .close-btn:hover {
            background-color: #ff4b6e;
            color: white;
            border-color: #ff4b6e;
            transform: translateY(-2px);
        }

        #error-msg {
            color: #ff4b6e; font-weight: 600; margin-top: 15px;
            min-height: 20px; font-size: 0.95rem; opacity: 0; transition: opacity 0.3s;
        }

        #quest-screen, #valentine-screen, #final-screen, #gallery-screen { display: none; }

        .letter {
            font-style: italic; line-height: 1.7; color: #444;
            background: #fffafa; padding: 25px; border-radius: 15px;
            border-left: 5px solid #ff4b6e; text-align: left; margin-bottom: 20px;
        }

        #timer {
            margin-bottom: 20px; font-weight: bold; color: #ff4b6e;
            font-size: 1.1rem; border-bottom: 1px solid #ffdae0; padding-bottom: 15px;
        }

        .slider-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3;
            margin: 20px 0;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .slider-container img {
            width: 100%; height: 100%; object-fit: cover; display: none;
        }
        .slider-container img.active { display: block; }

        #photo-date {
            margin-top: 10px;
            font-weight: 600;
            color: #ff4b6e;
            font-size: 1.1rem;
            min-height: 1.5rem;
        }

        .slider-controls { display: flex; justify-content: center; gap: 15px; margin-top: 10px; }

        #no-btn { position: absolute; transition: 0.1s; z-index: 1000; }
    </style>
</head>
<body>

<audio id="bg-music" src="Heavenly.mp3" loop></audio>

<div id="hint-modal" class="modal">
    <div class="modal-content">
        <h3 style="color:#ff4b6e; margin-top:0;">–ü—ñ–¥–∫–∞–∑–∫–∞ üí°</h3>
        <p id="hint-text" style="color:#555; margin-bottom:20px;"></p>
        <button class="close-btn" onclick="closeHint()">–ó—Ä–æ–∑—É–º—ñ–ª–∞!</button>
    </div>
</div>

<div id="music-toggle" onclick="toggleMusic()">
    <svg id="speaker-icon" viewBox="0 0 24 24">
        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
        <path id="speaker-waves" d="M15.54 8.46a5 5 0 0 1 0 7.07M19.07 4.93a10 10 0 0 1 0 14.14"></path>
        <line id="speaker-mute" x1="23" y1="1" x2="1" y2="23" style="display:none;"></line>
    </svg>
</div>

<div class="card" id="main-card">
    <div id="start-screen">
        <h2>–ù–∞—Å—Ç–∫–∞, —Ç–∏ –≥–æ—Ç–æ–≤–∞ –¥–æ —á–æ–≥–æ—Å—å –æ—Å–æ–±–ª–∏–≤–æ–≥–æ? ‚ù§Ô∏è</h2>
        <button class="action-btn" onclick="startQuest()">–¢–ê–ö, –Ø –ì–û–¢–û–í–ê!</button>
    </div>

    <div id="quest-screen">
        <h2 id="question-text"></h2>
        <div id="hint-area"></div>
        <div id="options" class="options-container" style="margin-top:20px;"></div>
        <div id="error-msg"></div>
    </div>

    <div id="valentine-screen">
        <h2>–ù–∞—Å—Ç–∫–∞, —Ç–∏ –±—É–¥–µ—à –º–æ—î—é –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ—é? ‚ù§Ô∏è</h2>
        <div style="display:flex; justify-content:center; gap:20px; height:60px; margin-top:20px;">
            <button class="action-btn" id="yes-btn" onclick="celebrate()">–¢–ê–ö!</button>
            <button class="action-btn" id="no-btn" onmouseover="moveNoButton()">–ù—ñ</button>
        </div>
    </div>

    <div id="final-screen">
        <div id="timer">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–∞—Å—É...</div>
        <div class="letter" id="typewriter-text"></div>
        <button class="action-btn" id="btn-to-gallery" style="display:none;" onclick="showGallery()">–ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –Ω–∞—à—ñ —Ñ–æ—Ç–æ-–∫–∞—Ä—Ç–∫–∏? üì∏</button>
    </div>

    <div id="gallery-screen">
        <h2>–ù–∞—à—ñ –º–æ–º–µ–Ω—Ç–∏ ‚ù§Ô∏è</h2>
        <div class="slider-container">
            <img src="image1.jpeg" class="active">
            <img src="image2.jpeg">
            <img src="image3.jpeg">
            <img src="image4.jpeg">
            <img src="image5.jpeg">
            <img src="image6.jpeg">
        </div>
        <div id="photo-date"></div>
        <div class="slider-controls">
            <button class="nav-btn" onclick="changeSlide(-1)">‚ùÆ –ù–∞–∑–∞–¥</button>
            <button class="nav-btn" onclick="changeSlide(1)">–í–ø–µ—Ä–µ–¥ ‚ùØ</button>
        </div>
        <br>
        <button class="action-btn" onclick="backToLetter()">‚¨ÖÔ∏è –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –ª–∏—Å—Ç–∞</button>
    </div>
</div>

<script>
    const errorTexts = [
        "–ù–∞–π–Ω! –î–∞–≤–∞–π –ø–æ –Ω–æ–≤—ñ–π! ‚ùå",
        "–ù–∞—Å—Ç—é—à, –Ω—É —Ç–∏ —á–æ–≥–æ? –ó–≥–∞–¥—É–π! ü§î",
        "–•—Ç–æ—Å—å —Å—å–æ–≥–æ–¥–Ω—ñ –Ω–µ—É–≤–∞–∂–Ω–∏–π... –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑! ‚ù§Ô∏è",
        "–ù–µ –≤–≥–∞–¥–∞–ª–∞! –¢–∏—Å–Ω–∏ —ñ–Ω—à—É –∫–Ω–æ–ø–∫—É! ‚ú®",
        "–ú–º–º, –∞ —è –¥—É–º–∞–≤ —Ç–∏ –ø–∞–º'—è—Ç–∞—î—à... üßê",
        "–û–π! –¶–µ –±—É–ª–∞ –ø–∞—Å—Ç–∫–∞! –î–∞–≤–∞–π —â–µ —Ä–∞–∑! üòÖ",
        "–ú–∞–π–∂–µ! –ê–ª–µ –Ω—ñ. –°–ø—Ä–æ–±—É–π –∑–Ω–æ–≤—É! üôå",
        "–¢–∏ —Ç–æ—á–Ω–æ –º–æ—è –ù–∞—Å—Ç–∫–∞? –ó–≥–∞–¥—É–π –∫—Ä–∞—â–µ! üòÇ",
        "–ü–æ–º–∏–ª–æ—á–∫–∞ –≤–∏–π—à–ª–∞! –¢–∏—Å–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É! üéØ",
        "–Ø –≤—ñ—Ä—é –≤ —Ç–µ–±–µ! –î–∞–≤–∞–π —â–µ —Å–ø—Ä–æ–±—É! üí™"
    ];

    const questions = [
        { q: "–í —è–∫—ñ–π –∫–∞—Ñ–µ—à—Ü—ñ –±—É–ª–æ –Ω–∞—à–µ –ø–µ—Ä—à–µ –ø–æ–±–∞—á–µ–Ω–Ω—è? (–∑–∏–º–∞)", options: ["–ë–∞–∫–∞—Ä–∞", "–í—ñ–¥–µ–Ω—Å—å–∫–∞", "–ü–∞—Ä–∫", "–û—Å—Ç—Ä–æ–≤–æ–∫"], correct: 1 },
        { q: "–Ø–∫—É —Å—Ç—Ä–∞–≤—É –º–∏ –≤–ø–µ—Ä—à–µ –ø—Ä–∏–≥–æ—Ç—É–≤–∞–ª–∏ —Ä–∞–∑–æ–º? (–≤ —Å—É–±–æ—Ç—É –ø—ñ—Å–ª—è –ø—Ä–æ–≥—É–ª—è–Ω–∫–∏ 08.11.2025)", options: ["–°–∏—Ä–Ω–∏–∫–∏", "–ë—É—Ç—Ä–µ—Ä–∏", "–ú—ñ–≤—ñ–Ω–∫–∞", "–ü–∞—Å—Ç–∞"], correct: 3 },
        { q: "–ö—É–¥–∏ –º–∏ —ñ–¥–µ–º–æ —ó—Å—Ç–∏, —è–∫—â–æ –≤–ø–∞–¥–ª—É –¥—É–º–∞—Ç–∏ –∫—É–¥–∏? (—ã–∞–∞–∞—ã–∞–∞—ã—ã üë®‚Äçü¶Ω)", options: ["–ë–∞–∫–∞—Ä–∞", "–†—É–º-–†—É–º", "–ß–µ–ª–µ–Ω—Ç–∞–Ω–æ", "–ú–∞–∫—à–Ω–∞–∫–Ω–µ–∫—Å"], correct: 3 },
        { q: "–ü—ñ–¥ —è–∫—É –º—É–∑–∏–∫—É –±—É–≤ –Ω–∞—à –ø–µ—Ä—à–∏–π —Ç—ñ–∫ —Ç–æ–∫? (—Å–∫–≤–µ—Ä–∏–∫ 12.02.2026)", options: ["–ë—É—è –∫–∞–∫ —è –∫—Ä–∞—Å–∏–≤", "–¢–∞–∫ —á–µ —Ç—ã –∂–¥–µ—à—å —Ü–µ–ª—É–π –º–µ–Ω—è", "–õ–∞–º–∞ –º–∞–º–∞ –ª–∞–º–µ —Å—ã–Ω—É", "Baby if u give it to me, ill give it yo u"], correct: 1 },
        { q: "–°–∫—ñ–ª—å–∫–∏ –º—ñ—Å—è—Ü—ñ–≤ –º–∏ –≤–∂–µ —Ä–∞–∑–æ–º?", options: ["23 –º—ñ—Å—è—Ü—ñ", "31 –º—ñ—Å—è—Ü—å", "28 –º—ñ—Å—è—Ü—ñ–≤", "21 –º—ñ—Å—è—Ü—å"], correct: 0 },
        { q: "–í —è–∫–µ –º—ñ—Å—Ç–æ –∑–∞ –∫–æ—Ä–¥–æ–Ω–æ–º –º–∏ –ø–µ—Ä—à–∏–º –¥—ñ–ª–æ–º –ø–æ—ñ–¥–µ–º–æ?", options: ["–†–∏–º", "–ö–∞–ø–∞–¥–æ–∫—ñ—è", "–í–µ–Ω–∞", "–¢–æ–∫—ñ–æ"], correct: 1 },
        { q: "–©–æ —è —Ç–æ–±—ñ –ø—Ä—è–º –∑–∞—Ä–∞–∑ –ø–æ–¥–∞—Ä—É—é?", options: ["–ë—Ä–∞—Å–ª–µ—Ç", "–§—É–≥–ª–µ—Ä", "–ü–ª—é—à–µ–≤—É —ñ–≥—Ä–∞—à–∫—É", "–ß–∞—à–∫—É"], correct: 0 }
    ];

    const photoDates = [
        "13.12.2025",
        "02.04.2024",
        "03.06.2025",
        "11.05.2025",
        "06.07.2025",
        "01.11.2025"
    ];

    let currentStep = 0;
    let currentSlide = 0;
    const startDate = new Date('2024-03-08T00:00:00');
    const music = document.getElementById("bg-music");

    function toggleMusic() {
        const btn = document.getElementById("music-toggle");
        const waves = document.getElementById("speaker-waves");
        const muteLine = document.getElementById("speaker-mute");

        if (music.paused) {
            music.play();
            btn.classList.add("playing");
            waves.style.display = "block";
            muteLine.style.display = "none";
        } else {
            music.pause();
            btn.classList.remove("playing");
            waves.style.display = "none";
            muteLine.style.display = "block";
        }
    }

    function startQuest() {
        music.play();
        document.getElementById("music-toggle").classList.add("playing");
        document.getElementById("start-screen").style.display = "none";
        document.getElementById("quest-screen").style.display = "block";
        loadQuestion();
    }

    function createHeart() {
        const heart = document.createElement('div');
        heart.className = 'bg-heart';
        heart.innerHTML = ['‚ù§Ô∏è','üíñ','üíó','üíï'][Math.floor(Math.random()*4)];
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = Math.random() * 3 + 2 + 's';
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 5000);
    }
    setInterval(createHeart, 400);

    function loadQuestion() {
        document.getElementById("error-msg").style.opacity = "0";
        const qData = questions[currentStep];

        let text = qData.q;
        let hint = "";
        const hintMatch = text.match(/\((.*?)\)/);

        if (hintMatch) {
            hint = hintMatch[1];
            text = text.replace(hintMatch[0], "").trim();
            document.getElementById("hint-area").innerHTML = `<div class="hint-bulb" onclick="showHint('${hint}')">üí°</div>`;
        } else {
            document.getElementById("hint-area").innerHTML = "";
        }

        document.getElementById("question-text").innerText = text;
        const container = document.getElementById("options");
        container.innerHTML = "";
        qData.options.forEach((opt, index) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index);
            container.appendChild(btn);
        });
    }

    function showHint(text) {
        document.getElementById("hint-text").innerText = text;
        document.getElementById("hint-modal").style.display = "flex";
    }

    function closeHint() {
        document.getElementById("hint-modal").style.display = "none";
    }

    function checkAnswer(selectedIndex) {
        const card = document.getElementById("main-card");
        if (selectedIndex === questions[currentStep].correct) {
            currentStep++;
            if (currentStep < questions.length) loadQuestion();
            else showValentine();
        } else {
            card.classList.add("shake");
            const msg = document.getElementById("error-msg");
            msg.innerText = errorTexts[Math.floor(Math.random() * errorTexts.length)];
            msg.style.opacity = "1";
            setTimeout(() => card.classList.remove("shake"), 400);
        }
    }

    function showValentine() {
        document.getElementById("quest-screen").style.display = "none";
        document.getElementById("valentine-screen").style.display = "block";
    }

    function moveNoButton() {
        const btn = document.getElementById("no-btn");
        const card = document.getElementById("main-card");
        btn.style.left = Math.random() * (card.offsetWidth - btn.offsetWidth) + "px";
        btn.style.top = Math.random() * (card.offsetHeight - btn.offsetHeight) + "px";
    }

    function celebrate() {
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        document.getElementById("valentine-screen").style.display = "none";
        document.getElementById("final-screen").style.display = "block";
        document.getElementById("main-card").style.maxWidth = "650px";
        startTypewriter();
        startTimer();
    }

    function startTypewriter() {
        const text = "–ù–∞—Å—Ç—é—à, —Ç–∏ –Ω–∞–≤—ñ—Ç—å –Ω–µ —É—è–≤–ª—è—î—à, —è–∫ –±–∞–≥–∞—Ç–æ –∑–Ω–∞—á–∏—à –¥–ª—è –º–µ–Ω–µ. –¶—ñ –¥–Ω—ñ –ø–æ—Ä—É—á —ñ–∑ —Ç–æ–±–æ—é —Å—Ç–∞–ª–∏ –Ω–∞–π–∫—Ä–∞—â–∏–º —á–∞—Å–æ–º —É –º–æ—î–º—É –∂–∏—Ç—Ç—ñ. –î—è–∫—É—é –∑–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ç–∞ —Ç–≤–æ—é –Ω—ñ–∂–Ω—ñ—Å—Ç—å. –¢–∏ ‚Äî –º–æ—î –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è. –Ø –æ–±—ñ—Ü—è—é, —â–æ –º–∏ –ø–æ–±–∞—á–∏–º–æ –ö–∞–ø–∞–¥–æ–∫—ñ—é —Ä–∞–∑–æ–º! –ö–æ—Ö–∞—é —Ç–µ–±–µ –±–µ–∑–º–µ–∂–Ω–æ! ‚ù§Ô∏è";
        let i = 0;
        function type() {
            if (i < text.length) {
                document.getElementById("typewriter-text").innerHTML += text.charAt(i);
                i++;
                setTimeout(type, 45);
            } else {
                document.getElementById("btn-to-gallery").style.display = "inline-block";
            }
        }
        type();
    }

    function startTimer() {
        setInterval(() => {
            const now = new Date();
            const diff = now - startDate;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / 1000 / 60) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById("timer").innerText = `–ú–∏ —Ä–∞–∑–æ–º —É–∂–µ: ${d}–¥ : ${h}–≥ : ${m}—Ö–≤ : ${s}—Å`;
        }, 1000);
    }

    function showGallery() {
        document.getElementById("final-screen").style.display = "none";
        document.getElementById("gallery-screen").style.display = "block";
        updatePhotoDate();
    }

    function backToLetter() {
        document.getElementById("gallery-screen").style.display = "none";
        document.getElementById("final-screen").style.display = "block";
    }

    function changeSlide(direction) {
        const slides = document.querySelectorAll(".slider-container img");
        slides[currentSlide].classList.remove("active");
        currentSlide = (currentSlide + direction + slides.length) % slides.length;
        slides[currentSlide].classList.add("active");
        updatePhotoDate();
    }

    function updatePhotoDate() {
        document.getElementById("photo-date").innerText = photoDates[currentSlide] || "";
    }

    window.onclick = function(event) {
        const modal = document.getElementById("hint-modal");
        if (event.target == modal) {
            closeHint();
        }
    }
</script>

</body>
</html>```